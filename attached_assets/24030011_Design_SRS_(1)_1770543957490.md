# Software Requirements Specification (SRS)
## LUMS Registrar Office Management System

**Document Version:** 1.0  
**Date:** February 5, 2026  
**Project:** CS 564 - Vibe Coding Assignment  
**Standard:** IEEE 830-1998  

**Technology Stack:**
- **Backend:** Flask 3.0+ (Python)
- **Frontend:** React 18+
- **Database:** PostgreSQL

---

## PROMPT LOG - PHASE 1: REQUIREMENTS GENERATION

### Prompt 1 (Initial Request)
```
Can you help me complete this assignment [assignment details provided]
```
**Purpose:** Initiate project understanding

### Prompt 2 (Technology Clarification)
```
For backend I want to use python based library. Preferably flask and for frontend 
I want to use react along with MUI for styling.
```
**Purpose:** Specify Flask + React + MUI stack

### Prompt 3 (Technology Confirmation)
```
Apologies. I made a mistake instead of using django + react. I will be using 
flask + react. Please update the document accordingly and carefully so no 
reference of django remains.
```
**Purpose:** Confirm Flask (not Django) as final backend choice

### Prompt 4 (Document Generation)
```
Please deliver Requirements and design generated by prompting an LLM, preferred 
format IEEE SRS using the document above.
```
**Purpose:** Generate IEEE SRS format deliverable

---

## Table of Contents

1. [Introduction](#1-introduction)
   - 1.1 Purpose
   - 1.2 Scope
   - 1.3 Definitions, Acronyms, and Abbreviations
   - 1.4 References
   - 1.5 Overview

2. [Overall Description](#2-overall-description)
   - 2.1 Product Perspective
   - 2.2 Product Functions
   - 2.3 User Characteristics
   - 2.4 Constraints
   - 2.5 Assumptions and Dependencies

3. [Specific Requirements](#3-specific-requirements)
   - 3.1 Functional Requirements
   - 3.2 Non-Functional Requirements

4. [System Design](#4-system-design)
   - 4.1 System Architecture
   - 4.2 Database Design
   - 4.3 API Design
   - 4.4 User Interface Design
   - 4.5 Security Design

5. [Appendices](#appendices)

---

## 1. Introduction

### 1.1 Purpose

This Software Requirements Specification (SRS) document describes the functional and non-functional requirements for the **LUMS Registrar Office Management System**. This system is being developed as part of the CS 564 course project using the **vibe coding methodology** - where all requirements, design, code, and testing are generated exclusively through LLM prompts without manual code editing.

**Intended Audience:**
- Development team (LLM-based code generation)
- Course instructors and evaluators
- Quality assurance team (LLM-based testing)
- Project stakeholders

### 1.2 Scope

The LUMS Registrar Office Management System (LUMS-RO) is a comprehensive web-based platform designed to automate academic administrative processes at Lahore University of Management Sciences.

**System Name:** LUMS Registrar Office Management System (LUMS-RO)

**Key Features:**
- Online document request services (transcripts, degrees, letters)
- Payment processing and transaction management
- Grade change petition workflow
- Major declaration and transfer applications
- Academic calendar management
- Document verification system
- Mobile-responsive interface (iOS and Android browsers)

**Benefits:**
- 24/7 accessibility for students and alumni
- Reduced processing time for requests
- Transparent tracking of application status
- Automated workflow approvals
- Secure document generation with QR codes

**Out of Scope:**
- Course registration system
- Student information system (SIS) - will integrate with existing
- Financial aid management
- Admission processing

### 1.3 Definitions, Acronyms, and Abbreviations

| Term | Definition |
|------|------------|
| LUMS | Lahore University of Management Sciences |
| RO | Registrar Office |
| SRS | Software Requirements Specification |
| LLM | Large Language Model |
| GCP | Grade Change Petition |
| IBCC | Inter Board Committee of Chairmen |
| PEC | Pakistan Engineering Council |
| HEC | Higher Education Commission |
| UAT | User Acceptance Testing |
| API | Application Programming Interface |
| REST | Representational State Transfer |
| JWT | JSON Web Token |
| CRUD | Create, Read, Update, Delete |
| SDLC | Software Development Life Cycle |
| ORM | Object-Relational Mapping (SQLAlchemy) |
| WSGI | Web Server Gateway Interface |

### 1.4 References

1. IEEE Std 830-1998: IEEE Recommended Practice for Software Requirements Specifications
2. LUMS Registrar Office Website: https://ro.lums.edu.pk
3. Flask Documentation: https://flask.palletsprojects.com/
4. React Documentation: https://react.dev/
5. SQLAlchemy Documentation: https://www.sqlalchemy.org/
6. CS 564 Project Guidelines: Vibe Coding Assignment PDF

### 1.5 Overview

This document is organized as follows:
- **Section 2** provides an overall description of the system including product perspective, functions, user characteristics, constraints, and assumptions
- **Section 3** details specific functional and non-functional requirements
- **Section 4** presents the system design including architecture, database schema, API specifications, and UI design
- **Appendices** contain supplementary information including prompt logs and development methodology

---

## 2. Overall Description

### 2.1 Product Perspective

The LUMS-RO system is a new, self-contained web application that will integrate with existing LUMS infrastructure:

**System Interfaces:**
- **Student Information System (SIS):** RESTful API integration for student data retrieval
- **Payment Gateway:** Third-party payment processor integration
- **Email Service:** SMTP integration for notifications
- **Document Verification Portal:** Public API for QR code verification

**User Interfaces:**
- Web-based responsive interface accessible via desktop and mobile browsers
- Material Design components for consistent UX
- Accessibility compliant (WCAG 2.1 Level AA)

**Hardware Interfaces:**
- Standard web servers for hosting
- PostgreSQL database server
- File storage system for documents

**Software Interfaces:**
- Flask 3.0+ web framework
- React 18+ for frontend
- PostgreSQL 15+ database
- Nginx web server
- Gunicorn WSGI server

**Communications Interfaces:**
- HTTPS (TLS 1.3) for all client-server communication
- RESTful API over HTTP/HTTPS
- WebSocket for real-time notifications (optional)

**Memory Constraints:**
- Application server: Minimum 4GB RAM
- Database server: Minimum 8GB RAM
- Client browser: Minimum 2GB RAM

**Operations:**
- 24/7 system availability (99.5% uptime target)
- Automated daily database backups
- Log rotation and archival

### 2.2 Product Functions

The major functions of LUMS-RO include:

**1. User Management**
- User registration and authentication
- Role-based access control (Student, Alumni, Staff, Admin)
- Password management and recovery

**2. Document Request Services**
- Official transcript requests (physical and electronic)
- Degree certificate requests
- Various letter requests (enrollment, completion, etc.)
- Document attestation services
- Duplicate degree issuance

**3. Payment Processing**
- Fee calculation based on service type and urgency
- Online payment gateway integration
- Payment voucher generation for bank deposits
- Transaction history and receipts

**4. Grade Change Petition (GCP) System**
- Instructor petition submission
- Multi-level approval workflow (Department → Dean → Registrar)
- Status tracking and notifications
- Student assessment data access

**5. Major Declaration & Transfer**
- Major preference submission
- Inter-school transfer applications
- IBCC certificate upload for specific programs
- Application status tracking

**6. Academic Calendar**
- Display of important dates and deadlines
- Event categorization (exams, holidays, registration)
- Calendar export functionality (iCal, Google Calendar)
- Email reminders for upcoming deadlines

**7. Document Verification**
- QR code generation on all documents
- Public verification portal
- Security features (serial numbers, security keys)
- Verification audit log

**8. Notification System**
- Email notifications for status changes
- In-app notifications dashboard
- Configurable notification preferences

**9. Administrative Functions**
- Request management and processing
- User account management
- System configuration
- Reports generation (daily requests, revenue, statistics)
- Content management (announcements, help documentation)

### 2.3 User Characteristics

| User Type | Characteristics | Technical Expertise | Frequency of Use |
|-----------|----------------|---------------------|------------------|
| **Students** | Currently enrolled, ages 18-25, tech-savvy | High - familiar with web applications | Daily to weekly |
| **Alumni** | Graduated, diverse age range (22-65), working professionals | Medium to High - varies by age | Occasional (as needed) |
| **Separated Students** | Former students who did not graduate | Medium | Rare (specific needs) |
| **Faculty** | Instructors submitting grade petitions | Medium - training required | Weekly during grading periods |
| **RO Staff** | Administrative employees processing requests | Medium - requires training | Daily |
| **Administrators** | System managers, IT personnel | High - technical background | Daily |

### 2.4 Constraints

**2.4.1 Regulatory Constraints**
- Must comply with FERPA (Family Educational Rights and Privacy Act)
- Must meet Pakistan Engineering Council (PEC) reporting requirements
- Must integrate with HEC PhD Country Directory Online System
- Must follow university data protection policies

**2.4.2 Development Constraints**
- **LLM-Only Development:** All code must be generated via LLM prompts with no manual editing (vibe coding requirement)
- Must use Flask backend and React frontend
- Development timeline: As per course schedule
- Documentation must include all prompts in sequence

**2.4.3 Technical Constraints**
- Must support modern browsers: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- Must be responsive for mobile devices (320px to 2560px width)
- Backend must use Flask 3.0+ with Flask-RESTful or similar
- Frontend must use React 18+ with hooks
- Database must be PostgreSQL 15+

**2.4.4 Security Constraints**
- All data transmission must use HTTPS (TLS 1.3)
- User authentication required for all services
- Password hashing required (bcrypt with 12 rounds)
- Session management with secure cookies
- Protection against common vulnerabilities (SQL injection, XSS, CSRF)

**2.4.5 Hardware Limitations**
- Must run on standard cloud infrastructure (AWS, GCP, or DigitalOcean)
- Must support concurrent access by 500+ users
- Database size expected to grow to 100GB+ over 5 years

### 2.5 Assumptions and Dependencies

**Assumptions:**
1. Users have access to internet-connected devices with modern browsers
2. Users have basic computer literacy and can navigate web applications
3. Student data is available from existing SIS via API or data export
4. Payment gateway provides reliable API with 99.9% uptime
5. SMTP email service is available for notifications
6. University provides hosting infrastructure

**Dependencies:**
1. **Flask Framework:** Application depends on Flask 3.0+ and its ecosystem
2. **React:** Frontend depends on React 18+ and associated libraries
3. **PostgreSQL:** Database functionality depends on PostgreSQL 15+
4. **SQLAlchemy:** ORM depends on SQLAlchemy 2.0+ for database operations
5. **Student Information System:** Integration requires SIS API availability
6. **Payment Gateway:** Online payments depend on third-party processor (e.g., Stripe, JazzCash)
7. **Email Service:** Notifications depend on SMTP service (e.g., SendGrid, AWS SES)
8. **File Storage:** Document storage may depend on cloud storage (AWS S3, MinIO)
9. **LLM Access:** Development process depends on LLM availability (ChatGPT, Claude, etc.)

---

## 3. Specific Requirements

### 3.1 Functional Requirements

#### 3.1.1 User Authentication and Authorization (FR-1)

**FR-1.1: User Login**
- The system shall provide a login interface accepting email/username and password
- Priority: High | Status: Mandatory

**FR-1.2: User Roles**
- The system shall support five user roles: Student, Alumni, Separated Student, Faculty, Staff, and Administrator
- Priority: High | Status: Mandatory

**FR-1.3: Password Reset**
- Alumni and separated students shall be able to reset passwords via email link
- Current students must contact helpdesk for password reset
- Priority: Medium | Status: Mandatory

**FR-1.4: Session Management**
- The system shall maintain secure user sessions using Flask-Session or JWT tokens
- Sessions shall expire after 30 minutes of inactivity
- Priority: High | Status: Mandatory

**FR-1.5: Role-Based Access Control**
- The system shall restrict access to features based on user role permissions
- Flask decorators shall be used for route-level access control
- Priority: High | Status: Mandatory

**FR-1.6: Multi-Factor Authentication (Optional)**
- The system may support 2FA via email or SMS for enhanced security
- Priority: Low | Status: Optional

#### 3.1.2 User Dashboard (FR-2)

**FR-2.1: Personalized Dashboard**
- Upon login, users shall see a personalized dashboard showing:
  - Recent requests with status
  - Important announcements
  - Quick action buttons
  - Statistics (pending, completed, total spent)
- Priority: High | Status: Mandatory

**FR-2.2: Request Summary Table**
- Dashboard shall display all user requests in a table with columns:
  - Application ID (unique identifier)
  - Request Type (transcript, degree, letter, etc.)
  - Status (draft, pending payment, paid, processing, ready, collected)
  - Submission Date
  - Amount (in PKR)
  - Ready Date (expected completion)
- Priority: High | Status: Mandatory

**FR-2.3: Search and Filter**
- Users shall be able to search requests by Application ID
- Users shall filter requests by type and status
- Priority: Medium | Status: Mandatory

**FR-2.4: Pagination**
- Request table shall support pagination with configurable items per page (10, 25, 50, 100)
- Priority: Low | Status: Mandatory

#### 3.1.3 Document Request Services (FR-3)

**FR-3.1: Transcript Request**
- Users shall request official transcripts (physical or electronic)
- Users shall specify quantity (1-10 copies)
- Priority: High | Status: Mandatory

**FR-3.2: eTranscript Service**
- Users shall request electronic transcripts sent directly via email
- System shall send eTranscripts to specified email addresses
- Priority: High | Status: Mandatory

**FR-3.3: Urgency Selection**
- Users shall select urgency type:
  - Regular (10 working days)
  - Urgent (5 working days)
  - Super Urgent (3 working days)
- Each urgency level has different pricing
- Priority: High | Status: Mandatory

**FR-3.4: Delivery Method**
- Users shall select delivery method:
  - Collection in person (free)
  - Local mailing within Pakistan (PKR 300)
  - International mailing (PKR 2,500+)
- For mailing, user shall provide complete address
- Priority: High | Status: Mandatory

**FR-3.5: Degree Certificate Request**
- Users shall request degree certificates including:
  - Original degree (post-convocation)
  - Degree before convocation (DBC)
  - Duplicate degree (requires affidavit)
- Priority: High | Status: Mandatory

**FR-3.6: Letter Services**
- Users shall request various letters:
  - Enrollment verification letter
  - Completion letter
  - Good standing letter
  - Custom letter (specify requirements)
- Priority: Medium | Status: Mandatory

**FR-3.7: Attestation Services**
- Users shall request attestation of:
  - Transcripts
  - Degrees
  - Other documents
- Priority: Medium | Status: Mandatory

**FR-3.8: Authorization for Collection**
- Users shall be able to authorize representatives for document collection
- Authorization requires:
  - Authorized person's name and CNIC
  - Email notification to RO
  - Scanned copy of CNIC
- Priority: Medium | Status: Mandatory

**FR-3.9: Special Instructions**
- Users shall be able to add special instructions/notes to requests
- Priority: Low | Status: Optional

#### 3.1.4 Payment Processing (FR-4)

**FR-4.1: Automatic Fee Calculation**
- Flask backend shall automatically calculate fees based on:
  - Service type (transcript: PKR 500, degree: PKR 1,000, etc.)
  - Urgency type (regular: base, urgent: +PKR 500, super urgent: +PKR 1,500)
  - Delivery method (collection: free, local: PKR 300, international: PKR 2,500+)
  - Quantity
- Priority: High | Status: Mandatory

**FR-4.2: Fee Breakdown Display**
- System shall display itemized fee breakdown before submission
- Priority: High | Status: Mandatory

**FR-4.3: Payment Voucher Generation**
- System shall generate PDF payment vouchers with:
  - Unique voucher number
  - Application ID
  - Amount breakdown
  - Bank deposit instructions
  - QR code for verification
- Priority: High | Status: Mandatory

**FR-4.4: Online Payment Integration**
- System shall integrate with payment gateway for online payments
- Supported methods: Credit/Debit card, Mobile wallet
- Priority: High | Status: Mandatory

**FR-4.5: Payment Status Tracking**
- System shall automatically update request status upon payment confirmation
- Status flow: Draft → Pending Payment → Paid → Processing
- Priority: High | Status: Mandatory

**FR-4.6: Transaction History**
- Users shall view complete payment history with:
  - Transaction ID
  - Date and time
  - Amount
  - Payment method
  - Receipt download option
- Priority: Medium | Status: Mandatory

**FR-4.7: Refund Processing**
- Administrators shall be able to process refunds for cancelled requests
- Priority: Low | Status: Optional

#### 3.1.5 Grade Change Petition System (FR-5)

**FR-5.1: GCP Submission (Faculty)**
- Faculty shall submit grade change petitions with:
  - Student ID and name
  - Course code and name
  - Current grade
  - Proposed new grade
  - Justification (text area, minimum 100 characters)
- Priority: High | Status: Mandatory

**FR-5.2: Student Assessment Data Access**
- System shall display student's:
  - Current course grade
  - Assessment breakdown
  - Historical grade data
- Accessible only to instructor of record
- Priority: High | Status: Mandatory

**FR-5.3: Multi-Level Approval Workflow**
- GCP shall route through approval hierarchy:
  1. Department Chairperson
  2. School Dean
  3. Registrar Office
- Each level can approve, reject, or request revision
- Priority: High | Status: Mandatory

**FR-5.4: Timeline Configuration**
- Administrators shall configure submission windows for:
  - Graduating seniors
  - Returning students
  - Different academic terms
- Priority: Medium | Status: Mandatory

**FR-5.5: N-1 Policy Application**
- System shall support application of n-1 grading policy where applicable
- Priority: Medium | Status: Optional

**FR-5.6: Real-Time Status Tracking**
- All parties (instructor, student, approvers) shall track petition status in real-time
- Status updates shall trigger email notifications
- Priority: High | Status: Mandatory

**FR-5.7: Comments and Revision Requests**
- Approvers shall be able to add comments or request revisions
- Instructor shall be notified and able to revise petition
- Priority: Medium | Status: Mandatory

#### 3.1.6 Major Declaration and Transfer (FR-6)

**FR-6.1: Eligibility Verification**
- System shall verify student has completed first year before allowing application
- Priority: High | Status: Mandatory

**FR-6.2: Application Window Enforcement**
- System shall only accept applications during designated windows
- Administrators shall configure window dates
- Priority: High | Status: Mandatory

**FR-6.3: Major Preference Submission**
- Students shall submit ranked major preferences (up to 3 choices)
- Priority: High | Status: Mandatory

**FR-6.4: IBCC Certificate Upload**
- System shall require IBCC Equivalence Certificate upload for:
  - BS Computer Science
  - BS Electrical Engineering
  - BS Chemical Engineering
- For non-FSc/FA students only
- Priority: High | Status: Mandatory

**FR-6.5: Document Upload**
- Students shall upload supporting documents (PDF format, max 5MB)
- Priority: Medium | Status: Mandatory

**FR-6.6: Application Status Updates**
- Students shall receive email notifications for application status changes
- Status options: Submitted, Under Review, Approved, Rejected
- Priority: High | Status: Mandatory

**FR-6.7: Inter-School Transfer**
- Students shall be able to apply for inter-school transfer
- Transfer requires approval from both source and destination school deans
- Priority: Medium | Status: Mandatory

#### 3.1.7 Academic Calendar (FR-7)

**FR-7.1: Calendar Display**
- System shall display academic calendar with:
  - Event title
  - Date
  - Description
  - Category (deadline, holiday, exam, registration)
- Calendar views: Month, Week, List
- Priority: High | Status: Mandatory

**FR-7.2: Event Categorization**
- Events shall be color-coded by category:
  - Deadlines (red)
  - Holidays (green)
  - Exams (orange)
  - Registration periods (blue)
- Priority: Medium | Status: Mandatory

**FR-7.3: Calendar Export**
- Users shall export calendar to:
  - iCal format (.ics file)
  - Google Calendar (direct add)
- Priority: Medium | Status: Mandatory

**FR-7.4: Email Reminders**
- System shall send email reminders:
  - 1 week before deadline
  - 1 day before deadline
- Users can configure reminder preferences
- Priority: Medium | Status: Optional

**FR-7.5: Islamic Holiday Handling**
- System shall note that Islamic holidays depend on moon sighting
- Dates subject to change based on Ruet-e-Hilal Committee announcements
- Priority: Low | Status: Mandatory

#### 3.1.8 Document Verification (FR-8)

**FR-8.1: QR Code Generation**
- All issued documents shall contain:
  - QR code linking to verification portal
  - Unique serial number
  - Security key
- Priority: High | Status: Mandatory

**FR-8.2: Public Verification Portal**
- System shall provide public portal (no login required) for document verification
- Users enter serial number or scan QR code
- Priority: High | Status: Mandatory

**FR-8.3: Verification Response**
- Verification shall display:
  - Document authenticity (valid/invalid)
  - Student name
  - Degree/Program
  - Issue date
  - Document type
- No sensitive information displayed (e.g., grades, CNIC)
- Priority: High | Status: Mandatory

**FR-8.4: Verification Audit Log**
- System shall log all verification attempts with:
  - Timestamp
  - IP address
  - Document serial number
  - Verification result
- Priority: Medium | Status: Mandatory

**FR-8.5: Tamper Detection**
- System shall detect if QR code or serial number has been altered
- Priority: High | Status: Mandatory

#### 3.1.9 Notification System (FR-9)

**FR-9.1: Email Notifications**
- System shall send email notifications for:
  - Request status changes
  - Payment confirmations
  - Document ready for collection
  - GCP status updates
  - Application approvals/rejections
  - Upcoming deadlines
- Priority: High | Status: Mandatory

**FR-9.2: In-App Notifications**
- Users shall see notification bell icon with badge count
- Clicking bell shall display recent notifications
- Priority: Medium | Status: Mandatory

**FR-9.3: Notification Preferences**
- Users shall configure which notifications to receive via:
  - Email
  - In-app
  - Both
- Priority: Low | Status: Optional

**FR-9.4: Notification History**
- Users shall access notification history (last 90 days)
- Priority: Low | Status: Optional

#### 3.1.10 Administrative Functions (FR-10)

**FR-10.1: Request Management Dashboard**
- Administrators shall view all pending requests in a table
- Filters: Status, Date range, User, Request type
- Bulk actions: Update status, Export to CSV
- Priority: High | Status: Mandatory

**FR-10.2: Request Processing**
- Staff shall update request status:
  - Paid → Processing (staff receives request)
  - Processing → Ready (document prepared)
  - Ready → Collected (user collected)
- Staff shall add processing notes visible only to staff
- Priority: High | Status: Mandatory

**FR-10.3: User Account Management**
- Administrators shall:
  - View all user accounts
  - Search users by name, email, student ID
  - Activate/deactivate accounts
  - Reset passwords
  - Modify user roles
- Priority: High | Status: Mandatory

**FR-10.4: Reports Generation**
- Administrators shall generate reports:
  - Daily requests summary
  - Revenue by service type
  - Processing time analytics
  - User activity statistics
- Export formats: PDF, Excel, CSV
- Priority: Medium | Status: Mandatory

**FR-10.5: Content Management**
- Administrators shall manage:
  - Announcements (add, edit, delete, schedule)
  - Academic calendar events
  - Help documentation/FAQs
  - Fee structure
- Priority: Medium | Status: Mandatory

**FR-10.6: System Configuration**
- Administrators shall configure:
  - Application windows (major declaration, GCP submission)
  - Fee amounts
  - Urgency processing times
  - Email templates
  - Payment gateway settings
- Priority: High | Status: Mandatory

**FR-10.7: Audit Logs**
- System shall maintain audit logs for:
  - All administrative actions
  - User login/logout
  - Request status changes
  - Payment transactions
  - Document generation
- Logs shall include: timestamp, user, action, IP address
- Priority: High | Status: Mandatory

---

### 3.2 Non-Functional Requirements

#### 3.2.1 Performance Requirements (NFR-1)

**NFR-1.1: Page Load Time**
- All pages shall load within 3 seconds on standard broadband (5 Mbps)
- React components shall use code-splitting and lazy loading
- Priority: High

**NFR-1.2: API Response Time**
- Flask API responses shall be delivered within 1 second for 95% of requests
- Database queries shall be optimized with proper indexing
- Priority: High

**NFR-1.3: Concurrent User Capacity**
- System shall support 500 concurrent users without performance degradation
- Flask shall be deployed with Gunicorn (4-8 worker processes)
- Priority: High

**NFR-1.4: Database Query Performance**
- Complex database queries shall execute within 500ms
- SQLAlchemy queries shall use joinedload() and selectinload() to minimize queries
- Priority: Medium

**NFR-1.5: File Upload Performance**
- Document uploads (up to 5MB) shall complete within 10 seconds on 5 Mbps connection
- Priority: Medium

**NFR-1.6: Scalability**
- System architecture shall support horizontal scaling
- Stateless API design to enable load balancing
- Priority: Medium

#### 3.2.2 Security Requirements (NFR-2)

**NFR-2.1: Data Encryption in Transit**
- All communication shall use HTTPS with TLS 1.3
- No sensitive data shall be transmitted over HTTP
- Priority: High

**NFR-2.2: Data Encryption at Rest**
- Sensitive data in database shall be encrypted
- Use cryptography library for field-level encryption of CNIC, bank details
- Priority: High

**NFR-2.3: Password Security**
- Passwords shall be hashed using Flask-Bcrypt with 12 rounds
- Minimum password requirements: 8 characters, mix of letters and numbers
- Priority: High

**NFR-2.4: Session Security**
- Sessions shall use secure, httpOnly cookies with SameSite=Strict
- CSRF protection enabled on all state-changing operations
- Priority: High

**NFR-2.5: SQL Injection Prevention**
- All database queries shall use SQLAlchemy ORM or parameterized queries
- No raw SQL with string concatenation
- Priority: High

**NFR-2.6: XSS Prevention**
- React shall escape all user inputs by default
- Flask responses shall use proper content-type headers
- Content Security Policy (CSP) headers configured
- Priority: High

**NFR-2.7: Authentication Lockout**
- Account shall be locked after 5 failed login attempts within 15 minutes
- Unlock via email link or admin intervention
- Priority: Medium

**NFR-2.8: Authorization Checks**
- All Flask routes shall enforce permission checks using decorators
- React frontend shall hide unauthorized UI elements
- Backend shall always validate permissions
- Priority: High

**NFR-2.9: File Upload Security**
- Uploaded files shall be scanned for malware
- File types restricted to PDF, JPG, PNG
- File size limit: 5MB per file
- Files stored outside web root
- Priority: High

**NFR-2.10: Audit Logging**
- All sensitive operations shall be logged with user ID, timestamp, IP address
- Logs shall be immutable and stored securely
- Priority: High

#### 3.2.3 Reliability Requirements (NFR-3)

**NFR-3.1: System Uptime**
- System shall maintain 99.5% uptime during academic terms
- Planned maintenance during low-usage periods (2-4 AM)
- Priority: High

**NFR-3.2: Data Backup**
- Database shall be backed up daily at 2 AM
- Backups retained for 30 days
- Weekly full backups retained for 1 year
- Priority: High

**NFR-3.3: Error Handling**
- All errors shall be caught and logged without exposing sensitive information
- User-friendly error messages displayed to users
- 500 errors logged with full stack trace
- Priority: High

**NFR-3.4: Recovery Time Objective (RTO)**
- System shall recover from failures within 1 hour
- Database restoration from backup within 30 minutes
- Priority: Medium

**NFR-3.5: Data Integrity**
- Database transactions shall use ACID properties
- SQLAlchemy sessions with proper commit/rollback handling
- Priority: High

**NFR-3.6: Graceful Degradation**
- System shall continue functioning with reduced features if external services fail
- Example: Allow requests without payment if gateway is down, process payment later
- Priority: Medium

#### 3.2.4 Usability Requirements (NFR-4)

**NFR-4.1: Mobile Responsiveness**
- System shall be fully functional on devices with screen widths from 320px to 2560px
- React components shall use responsive design with media queries
- Touch-friendly UI elements (minimum 44x44px)
- Priority: High

**NFR-4.2: Browser Compatibility**
- System shall work on:
  - Chrome 90+ (Windows, macOS, Android)
  - Firefox 88+ (Windows, macOS)
  - Safari 14+ (macOS, iOS)
  - Edge 90+ (Windows)
- Priority: High

**NFR-4.3: Accessibility (WCAG 2.1 Level AA)**
- All interactive elements shall be keyboard accessible
- Images shall have alt text
- Color contrast ratio minimum 4.5:1 for normal text
- ARIA labels for screen readers
- Priority: High

**NFR-4.4: User Learning Curve**
- New users shall be able to submit a request within 10 minutes without training
- Tooltips and help text on complex forms
- Priority: Medium

**NFR-4.5: Consistent UI/UX**
- All pages shall follow consistent design patterns
- React component library for reusable UI elements
- Priority: Medium

**NFR-4.6: Help Documentation**
- Context-sensitive help available on all forms
- Comprehensive FAQ section
- Video tutorials for common tasks
- Priority: Low

**NFR-4.7: Multilingual Support (Future)**
- System architecture shall support internationalization
- Initial release: English only
- Future: Urdu support
- Priority: Low

#### 3.2.5 Maintainability Requirements (NFR-5)

**NFR-5.1: Code Documentation**
- All Flask routes, models, and functions shall have docstrings
- React components shall have JSDoc comments
- Priority: Medium

**NFR-5.2: Modular Architecture**
- Flask blueprints shall be modular and loosely coupled
- React components shall be reusable
- Priority: High

**NFR-5.3: Version Control**
- All code shall be version controlled using Git
- Meaningful commit messages required
- Priority: High

**NFR-5.4: Automated Testing**
- Minimum 70% code coverage for backend
- Unit tests for Flask routes and models
- Integration tests for API endpoints
- Priority: High

**NFR-5.5: Error Logging**
- Flask shall use centralized logging (e.g., Sentry)
- Logs categorized by severity: DEBUG, INFO, WARNING, ERROR, CRITICAL
- Priority: High

**NFR-5.6: Database Migrations**
- All schema changes shall use Alembic migrations
- Migrations shall be reversible
- Priority: High

**NFR-5.7: Code Quality**
- Python code shall follow PEP 8 style guide
- JavaScript shall follow ESLint recommended rules
- Code reviews required before merging
- Priority: Medium

#### 3.2.6 Portability Requirements (NFR-6)

**NFR-6.1: Platform Independence**
- Backend shall run on Linux, macOS, Windows
- Docker containerization for consistent deployment
- Priority: High

**NFR-6.2: Database Portability**
- Use SQLAlchemy abstractions to support multiple databases
- Primary: PostgreSQL, fallback: MySQL
- Priority: Low

**NFR-6.3: Cloud Deployment**
- System shall be deployable on major cloud platforms:
  - AWS (EC2, RDS, S3)
  - Google Cloud Platform
  - DigitalOcean
- Priority: Medium

---

## 4. System Design

### 4.1 System Architecture

#### 4.1.1 Architectural Style

The LUMS-RO system follows a **three-tier architecture** with clear separation of concerns:

**1. Presentation Layer (Client-Side)**
- React 18+ Single Page Application (SPA)
- Responsive UI using CSS media queries and Flexbox/Grid
- State management: React Context API + useReducer
- HTTP client: Axios for API communication

**2. Application Layer (Server-Side)**
- Flask 3.0+ web framework
- RESTful API using Flask-RESTful or custom blueprints
- JWT authentication using Flask-JWT-Extended
- Business logic organized in Flask blueprints
- Celery for asynchronous tasks (email sending, report generation)

**3. Data Layer**
- PostgreSQL 15+ relational database
- SQLAlchemy ORM for database abstraction
- Redis for caching and session storage (optional)
- File storage: Local filesystem or AWS S3

#### 4.1.2 System Component Diagram

```
┌─────────────────────────────────────────────────────────────────┐
│                        CLIENT TIER                              │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │          React 18 SPA (Browser)                         │   │
│  │  - Components (Login, Dashboard, Forms)                 │   │
│  │  - React Router (Navigation)                            │   │
│  │  - Context API (State Management)                       │   │
│  │  - Axios (HTTP Client)                                  │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
                              ↕ HTTPS (REST API)
┌─────────────────────────────────────────────────────────────────┐
│                      APPLICATION TIER                           │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │         Flask 3.0 + Flask-RESTful                       │   │
│  │  ┌────────────────────────────────────────────────┐    │   │
│  │  │  Flask Blueprints:                              │    │   │
│  │  │  - auth (User, Authentication)                  │    │   │
│  │  │  - requests (Document Requests)                 │    │   │
│  │  │  - payments (Payment Processing)                │    │   │
│  │  │  - gcp (Grade Change Petitions)                 │    │   │
│  │  │  - major (Major Applications)                   │    │   │
│  │  │  - calendar (Academic Calendar)                 │    │   │
│  │  │  - notifications (Email/In-app Notifications)   │    │   │
│  │  │  - verification (Document Verification)         │    │   │
│  │  │  - admin (Admin Functions)                      │    │   │
│  │  └────────────────────────────────────────────────┘    │   │
│  │  ┌────────────────────────────────────────────────┐    │   │
│  │  │  Middleware:                                    │    │   │
│  │  │  - CORS (Flask-CORS)                            │    │   │
│  │  │  - CSRF Protection                              │    │   │
│  │  │  - JWT Authentication (Flask-JWT-Extended)      │    │   │
│  │  │  - Rate Limiting (Flask-Limiter)                │    │   │
│  │  └────────────────────────────────────────────────┘    │   │
│  │  ┌────────────────────────────────────────────────┐    │   │
│  │  │  Services:                                      │    │   │
│  │  │  - Fee Calculator                               │    │   │
│  │  │  - PDF Generator (ReportLab)                    │    │   │
│  │  │  - QR Code Generator                            │    │   │
│  │  │  - Email Service                                │    │   │
│  │  │  - Payment Gateway Integration                  │    │   │
│  │  └────────────────────────────────────────────────┘    │   │
│  └─────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │         Celery (Asynchronous Task Queue)                │   │
│  │  - Email sending                                        │   │
│  │  - Report generation                                    │   │
│  │  - Document processing                                  │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
                              ↕ Database Queries (SQLAlchemy)
┌─────────────────────────────────────────────────────────────────┐
│                         DATA TIER                               │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │           PostgreSQL 15+ Database                       │   │
│  │  - User accounts                                        │   │
│  │  - Requests, Documents, Payments                        │   │
│  │  - Grade Change Petitions                               │   │
│  │  - Major Applications                                   │   │
│  │  - Academic Calendar, Notifications                     │   │
│  └─────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │           File Storage (Local / S3)                     │   │
│  │  - Uploaded documents                                   │   │
│  │  - Generated PDFs                                       │   │
│  │  - Document attachments                                 │   │
│  └─────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │           Redis (Optional)                              │   │
│  │  - Session storage (Flask-Session)                      │   │
│  │  - Cache (API responses, queries)                       │   │
│  │  - Celery broker                                        │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘

External Services:
├─ Payment Gateway (Stripe / JazzCash / EasyPaisa)
├─ Email Service (SendGrid / AWS SES)
└─ Student Information System (SIS) - REST API Integration
```

#### 4.1.3 Technology Stack

| Layer | Technology | Version | Purpose |
|-------|-----------|---------|---------|
| **Frontend** | React | 18.2+ | UI framework |
| | React Router | 6.x | Client-side routing |
| | Axios | 1.x | HTTP client |
| | Formik | 2.x | Form handling |
| | Yup | 1.x | Validation |
| | CSS Modules / Styled Components | Latest | Styling |
| **Backend** | Flask | 3.0+ | Web framework |
| | Flask-RESTful | 0.3+ | REST API framework |
| | Flask-JWT-Extended | 4.5+ | JWT authentication |
| | Flask-SQLAlchemy | 3.1+ | SQLAlchemy integration |
| | Flask-Migrate | 4.0+ | Database migrations (Alembic) |
| | Flask-Bcrypt | 1.0+ | Password hashing |
| | Flask-CORS | 4.0+ | Cross-origin support |
| | Flask-Limiter | 3.5+ | Rate limiting |
| | Marshmallow | 3.20+ | Serialization/validation |
| | Celery | 5.3+ | Task queue |
| | ReportLab | 4.0+ | PDF generation |
| | Pillow | 10.0+ | Image processing |
| | python-qrcode | 7.4+ | QR code generation |
| **Database** | PostgreSQL | 15+ | Primary database |
| | SQLAlchemy | 2.0+ | ORM |
| | psycopg2-binary | 2.9+ | PostgreSQL adapter |
| | Alembic | 1.12+ | Database migrations |
| **Caching** | Redis | 7.0+ | Cache & session store |
| **Web Server** | Nginx | 1.24+ | Reverse proxy |
| | Gunicorn | 21.0+ | WSGI server |
| **Deployment** | Docker | 24.0+ | Containerization |
| | Docker Compose | 2.20+ | Multi-container orchestration |

### 4.2 Database Design

#### 4.2.1 Entity Relationship Diagram (ERD)

```
┌──────────────────┐
│      User        │
├──────────────────┤
│ PK id            │
│ UK email         │
│    password_hash │
│    first_name    │
│    last_name     │
│    role          │◄───────┐
│    is_active     │        │
│    created_at    │        │
│    updated_at    │        │
└──────────────────┘        │
         ▲                  │
         │ 1:1              │
         │                  │
┌──────────────────┐        │ 1:N
│     Student      │        │
├──────────────────┤        │
│ PK id            │        │
│ FK user_id       │        │
│ UK student_number│        │
│    program       │        │
│    year          │        │
│    status        │        │
│    enrollment_date│       │
└──────────────────┘        │
         │                  │
         │ 1:N              │
         │                  │
         ▼                  │
┌──────────────────┐        │
│ MajorApplication │        │
├──────────────────┤        │
│ PK id            │        │
│ FK student_id    │        │
│    preferences   │        │
│    status        │        │
│    ibcc_cert_path│        │
│    submitted_at  │        │
└──────────────────┘        │
                            │
┌──────────────────┐        │
│     Request      │◄───────┘
├──────────────────┤
│ PK id            │
│ FK user_id       │
│ UK application_id│
│    type          │
│    status        │
│    urgency       │
│    quantity      │
│    amount        │
│    notes         │
│    created_at    │
│    ready_date    │
└──────────────────┘
         │
         │ 1:N
         │
         ▼
┌──────────────────┐
│    Document      │
├──────────────────┤
│ PK id            │
│ FK request_id    │
│    document_type │
│    file_path     │
│    qr_code       │
│    serial_number │
│    security_key  │
│    generated_at  │
└──────────────────┘

┌──────────────────┐
│     Payment      │
├──────────────────┤
│ PK id            │
│ FK request_id    │◄─── 1:N from Request
│    amount        │
│    method        │
│    transaction_id│
│    status        │
│    paid_at       │
└──────────────────┘

┌──────────────────┐
│  GradePetition   │
├──────────────────┤
│ PK id            │
│ FK instructor_id │◄─── FK to User
│ FK student_id    │◄─── FK to Student
│    course_code   │
│    old_grade     │
│    new_grade     │
│    justification │
│    status        │
│    submitted_at  │
└──────────────────┘
         │
         │ 1:N
         │
         ▼
┌──────────────────┐
│   GCPApproval    │
├──────────────────┤
│ PK id            │
│ FK petition_id   │
│ FK approver_id   │◄─── FK to User
│    level         │ (dept/dean/ro)
│    decision      │
│    comments      │
│    decided_at    │
└──────────────────┘

┌──────────────────┐
│  Notification    │
├──────────────────┤
│ PK id            │
│ FK user_id       │◄─── FK to User
│    title         │
│    message       │
│    type          │
│    is_read       │
│    created_at    │
└──────────────────┘

┌──────────────────┐
│ AcademicCalendar │
├──────────────────┤
│ PK id            │
│    title         │
│    description   │
│    event_date    │
│    category      │
│    send_reminder │
└──────────────────┘
```

#### 4.2.2 Database Schema (SQLAlchemy Models)

**1. User Model**
```python
# app/models/user.py
from app import db, bcrypt
from datetime import datetime

class User(db.Model):
    __tablename__ = 'users'
    
    id = db.Column(db.Integer, primary_key=True)
    email = db.Column(db.String(120), unique=True, nullable=False, index=True)
    password_hash = db.Column(db.String(255), nullable=False)
    first_name = db.Column(db.String(50))
    last_name = db.Column(db.String(50))
    role = db.Column(db.Enum('student', 'alumni', 'separated', 'faculty', 'staff', 'admin', 
                             name='user_role'), nullable=False)
    is_active = db.Column(db.Boolean, default=True)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    
    # Relationships
    student = db.relationship('Student', back_populates='user', uselist=False)
    requests = db.relationship('Request', back_populates='user', lazy='dynamic')
    
    def set_password(self, password):
        self.password_hash = bcrypt.generate_password_hash(password).decode('utf-8')
    
    def check_password(self, password):
        return bcrypt.check_password_hash(self.password_hash, password)
    
    def __repr__(self):
        return f'<User {self.email}>'
```

**2. Student Model**
```python
# app/models/student.py
from app import db

class Student(db.Model):
    __tablename__ = 'students'
    
    id = db.Column(db.Integer, primary_key=True)
    user_id = db.Column(db.Integer, db.ForeignKey('users.id'), nullable=False)
    student_number = db.Column(db.String(20), unique=True, nullable=False, index=True)
    program = db.Column(db.String(100))
    year = db.Column(db.Integer)
    status = db.Column(db.Enum('enrolled', 'graduated', 'separated', name='student_status'))
    enrollment_date = db.Column(db.Date)
    
    # Relationships
    user = db.relationship('User', back_populates='student')
    major_applications = db.relationship('MajorApplication', back_populates='student')
    
    def __repr__(self):
        return f'<Student {self.student_number}>'
```

**3. Request Model**
```python
# app/models/request.py
from app import db
from datetime import datetime

class Request(db.Model):
    __tablename__ = 'requests'
    
    id = db.Column(db.Integer, primary_key=True)
    user_id = db.Column(db.Integer, db.ForeignKey('users.id'), nullable=False)
    application_id = db.Column(db.String(20), unique=True, nullable=False, index=True)
    type = db.Column(db.Enum('transcript', 'etranscript', 'degree', 'letter_enrollment', 
                             'letter_completion', 'attestation', name='request_type'))
    status = db.Column(db.Enum('draft', 'pending_payment', 'paid', 'processing', 'ready', 
                               'collected', 'cancelled', name='request_status'), 
                      default='draft')
    urgency = db.Column(db.Enum('regular', 'urgent', 'super_urgent', name='urgency_type'))
    quantity = db.Column(db.Integer, default=1)
    amount = db.Column(db.Numeric(10, 2))
    notes = db.Column(db.Text)
    created_at = db.Column(db.DateTime, default=datetime.utcnow, index=True)
    ready_date = db.Column(db.Date)
    
    # Relationships
    user = db.relationship('User', back_populates='requests')
    documents = db.relationship('Document', back_populates='request', cascade='all, delete-orphan')
    payments = db.relationship('Payment', back_populates='request', cascade='all, delete-orphan')
    
    def __repr__(self):
        return f'<Request {self.application_id}>'
```

**Additional models follow similar pattern...**

#### 4.2.3 Database Indexes

Key indexes for query performance:
- `users.email` (unique index for fast login queries)
- `students.student_number` (unique index)
- `requests.application_id` (unique index)
- `requests.user_id, requests.status` (composite index for user's requests by status)
- `grade_petitions.student_id` (foreign key index)
- `notifications.user_id, notifications.is_read` (composite index)

### 4.3 API Design

#### 4.3.1 RESTful API Endpoints

Base URL: `http://localhost:5000/api/`

**Authentication Endpoints**

| Method | Endpoint | Auth Required | Description |
|--------|----------|---------------|-------------|
| POST | `/api/auth/login` | No | User login, returns JWT tokens |
| POST | `/api/auth/refresh` | Yes (Refresh) | Refresh access token |
| POST | `/api/auth/logout` | Yes | Invalidate refresh token |
| GET | `/api/auth/me` | Yes | Get current user details |
| POST | `/api/auth/password-reset` | No | Request password reset |
| POST | `/api/auth/password-reset-confirm` | No | Confirm password reset |

**Request Management Endpoints**

| Method | Endpoint | Auth Required | Description |
|--------|----------|---------------|-------------|
| GET | `/api/requests` | Yes | List user's requests (paginated) |
| POST | `/api/requests` | Yes | Create new request |
| GET | `/api/requests/<id>` | Yes | Get request details |
| PATCH | `/api/requests/<id>` | Yes | Update request (draft only) |
| DELETE | `/api/requests/<id>` | Yes | Delete request (draft only) |
| POST | `/api/requests/<id>/calculate-fee` | Yes | Calculate fee for request |
| GET | `/api/requests/<id>/download-voucher` | Yes | Download payment voucher PDF |

**Payment Endpoints**

| Method | Endpoint | Auth Required | Description |
|--------|----------|---------------|-------------|
| POST | `/api/payments/process` | Yes | Process online payment |
| GET | `/api/payments/history` | Yes | Get payment history |
| GET | `/api/payments/<id>/receipt` | Yes | Download payment receipt |

**Grade Change Petition Endpoints**

| Method | Endpoint | Auth Required | Description |
|--------|----------|---------------|-------------|
| GET | `/api/gcp` | Yes (Faculty) | List instructor's petitions |
| POST | `/api/gcp` | Yes (Faculty) | Submit new petition |
| GET | `/api/gcp/<id>` | Yes | Get petition details |
| POST | `/api/gcp/<id>/approve` | Yes (Admin) | Approve petition |
| POST | `/api/gcp/<id>/reject` | Yes (Admin) | Reject petition |
| POST | `/api/gcp/<id>/request-revision` | Yes (Admin) | Request revision |

**Major Application Endpoints**

| Method | Endpoint | Auth Required | Description |
|--------|----------|---------------|-------------|
| GET | `/api/major/check-eligibility` | Yes (Student) | Check if eligible to apply |
| POST | `/api/major/apply` | Yes (Student) | Submit major application |
| GET | `/api/major/my-application` | Yes (Student) | Get student's application |
| POST | `/api/major/upload-ibcc` | Yes (Student) | Upload IBCC certificate |

**Calendar Endpoints**

| Method | Endpoint | Auth Required | Description |
|--------|----------|---------------|-------------|
| GET | `/api/calendar/events` | No | List academic calendar events |
| GET | `/api/calendar/events/<id>` | No | Get event details |
| GET | `/api/calendar/export` | Yes | Export calendar (iCal format) |

**Verification Endpoints**

| Method | Endpoint | Auth Required | Description |
|--------|----------|---------------|-------------|
| GET | `/api/verify/<serial_number>` | No | Verify document authenticity |
| POST | `/api/verify/scan-qr` | No | Verify by QR code scan |

**Admin Endpoints**

| Method | Endpoint | Auth Required | Description |
|--------|----------|---------------|-------------|
| GET | `/api/admin/requests` | Yes (Staff/Admin) | List all requests |
| PATCH | `/api/admin/requests/<id>/update-status` | Yes (Staff/Admin) | Update request status |
| GET | `/api/admin/users` | Yes (Admin) | List all users |
| PATCH | `/api/admin/users/<id>` | Yes (Admin) | Update user details |
| GET | `/api/admin/reports/daily-summary` | Yes (Admin) | Generate daily report |
| GET | `/api/admin/reports/revenue` | Yes (Admin) | Generate revenue report |

#### 4.3.2 API Request/Response Examples

**Example 1: User Login**

Request:
```http
POST /api/auth/login
Content-Type: application/json

{
  "email": "john.doe@lums.edu.pk",
  "password": "SecurePassword123"
}
```

Response:
```http
HTTP/1.1 200 OK
Content-Type: application/json

{
  "access_token": "eyJ0eXAiOiJKV1QiLCJhbGci...",
  "refresh_token": "eyJ0eXAiOiJKV1QiLCJhbGci...",
  "user": {
    "id": 123,
    "email": "john.doe@lums.edu.pk",
    "first_name": "John",
    "last_name": "Doe",
    "role": "student"
  }
}
```

**Example 2: Create Document Request**

Request:
```http
POST /api/requests
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGci...
Content-Type: application/json

{
  "type": "transcript",
  "urgency": "urgent",
  "quantity": 2,
  "delivery_method": "local_mail",
  "mailing_address": "123 Main St, Lahore, Pakistan",
  "notes": "Please send to the address provided"
}
```

Response:
```http
HTTP/1.1 201 Created
Content-Type: application/json

{
  "id": 456,
  "application_id": "APP20260205001",
  "type": "transcript",
  "urgency": "urgent",
  "quantity": 2,
  "amount": "1800.00",
  "status": "pending_payment",
  "created_at": "2026-02-05T10:30:00Z",
  "payment_voucher_url": "/api/requests/456/download-voucher"
}
```

#### 4.3.3 Flask Application Structure

```
backend/
├── app/
│   ├── __init__.py           # Flask app factory
│   ├── config.py             # Configuration classes
│   ├── models/               # SQLAlchemy models
│   │   ├── __init__.py
│   │   ├── user.py
│   │   ├── student.py
│   │   ├── request.py
│   │   ├── document.py
│   │   ├── payment.py
│   │   └── grade_petition.py
│   ├── routes/               # Flask blueprints
│   │   ├── __init__.py
│   │   ├── auth.py           # /api/auth/*
│   │   ├── requests.py       # /api/requests/*
│   │   ├── gcp.py            # /api/gcp/*
│   │   ├── major.py          # /api/major/*
│   │   ├── calendar.py       # /api/calendar/*
│   │   └── admin.py          # /api/admin/*
│   ├── schemas/              # Marshmallow schemas
│   │   ├── __init__.py
│   │   ├── user_schema.py
│   │   ├── request_schema.py
│   │   └── ...
│   ├── services/             # Business logic
│   │   ├── __init__.py
│   │   ├── auth_service.py
│   │   ├── request_service.py
│   │   ├── payment_service.py
│   │   └── notification_service.py
│   └── utils/                # Helper functions
│       ├── __init__.py
│       ├── decorators.py     # Custom decorators
│       ├── validators.py
│       └── helpers.py
├── migrations/               # Alembic migrations
├── tests/                    # Pytest tests
│   ├── test_auth.py
│   ├── test_requests.py
│   └── ...
├── .env                      # Environment variables
├── .env.example
├── requirements.txt
└── run.py                    # Application entry point
```

#### 4.3.4 Flask App Factory (`app/__init__.py`)

```python
from flask import Flask
from flask_sqlalchemy import SQLAlchemy
from flask_migrate import Migrate
from flask_jwt_extended import JWTManager
from flask_bcrypt import Bcrypt
from flask_cors import CORS
from flask_marshmallow import Marshmallow
from config import Config

db = SQLAlchemy()
migrate = Migrate()
jwt = JWTManager()
bcrypt = Bcrypt()
ma = Marshmallow()

def create_app(config_class=Config):
    app = Flask(__name__)
    app.config.from_object(config_class)

    # Initialize extensions
    db.init_app(app)
    migrate.init_app(app, db)
    jwt.init_app(app)
    bcrypt.init_app(app)
    ma.init_app(app)
    CORS(app, resources={r"/api/*": {"origins": "*"}})

    # Register blueprints
    from app.routes import auth, requests, gcp, major, calendar, admin
    app.register_blueprint(auth.bp)
    app.register_blueprint(requests.bp)
    app.register_blueprint(gcp.bp)
    app.register_blueprint(major.bp)
    app.register_blueprint(calendar.bp)
    app.register_blueprint(admin.bp)

    # Error handlers
    @app.errorhandler(404)
    def not_found(error):
        return {"error": "Not found"}, 404

    @app.errorhandler(500)
    def internal_error(error):
        db.session.rollback()
        return {"error": "Internal server error"}, 500

    return app
```

#### 4.3.5 Authentication Flow Example (`app/routes/auth.py`)

```python
from flask import Blueprint, request, jsonify
from flask_jwt_extended import create_access_token, create_refresh_token, \
    jwt_required, get_jwt_identity
from app import db
from app.models.user import User
from app.schemas.user_schema import UserSchema

bp = Blueprint('auth', __name__, url_prefix='/api/auth')
user_schema = UserSchema()

@bp.route('/login', methods=['POST'])
def login():
    data = request.get_json()
    
    if not data or not data.get('email') or not data.get('password'):
        return jsonify({"error": "Email and password required"}), 400
    
    user = User.query.filter_by(email=data['email']).first()
    
    if not user or not user.check_password(data['password']):
        return jsonify({"error": "Invalid credentials"}), 401
    
    if not user.is_active:
        return jsonify({"error": "Account is inactive"}), 403
    
    access_token = create_access_token(identity=user.id)
    refresh_token = create_refresh_token(identity=user.id)
    
    return jsonify({
        "access_token": access_token,
        "refresh_token": refresh_token,
        "user": user_schema.dump(user)
    }), 200

@bp.route('/refresh', methods=['POST'])
@jwt_required(refresh=True)
def refresh():
    current_user_id = get_jwt_identity()
    access_token = create_access_token(identity=current_user_id)
    return jsonify({"access_token": access_token}), 200

@bp.route('/me', methods=['GET'])
@jwt_required()
def get_current_user():
    current_user_id = get_jwt_identity()
    user = User.query.get(current_user_id)
    return jsonify(user_schema.dump(user)), 200
```

#### 4.3.6 Custom Authorization Decorator (`app/utils/decorators.py`)

```python
from functools import wraps
from flask import jsonify
from flask_jwt_extended import get_jwt_identity
from app.models.user import User

def role_required(*roles):
    """Decorator to require specific roles for Flask routes"""
    def decorator(f):
        @wraps(f)
        def decorated_function(*args, **kwargs):
            current_user_id = get_jwt_identity()
            user = User.query.get(current_user_id)
            
            if not user:
                return jsonify({"error": "User not found"}), 404
            
            if user.role not in roles:
                return jsonify({"error": "Insufficient permissions"}), 403
            
            return f(*args, **kwargs)
        return decorated_function
    return decorator

# Usage example in routes:
# @bp.route('/admin-only')
# @jwt_required()
# @role_required('admin')
# def admin_only_route():
#     return jsonify({"message": "Admin access granted"})
```

### 4.4 User Interface Design

#### 4.4.1 Design Principles

1. **Mobile-First Design:** Start with mobile layout, progressively enhance for larger screens
2. **Responsive Breakpoints:**
   - Mobile: 320px - 767px
   - Tablet: 768px - 1023px
   - Desktop: 1024px+
3. **Accessibility:** WCAG 2.1 Level AA compliance
4. **Performance:** Code-splitting, lazy loading, optimized images
5. **Consistency:** Reusable React components, consistent color scheme

#### 4.4.2 Color Scheme

| Color | Hex | Usage |
|-------|-----|-------|
| Primary Blue | #1976D2 | Primary buttons, links, headers |
| Secondary Red | #DC004E | Error states, important notices |
| Success Green | #4CAF50 | Success messages, completed status |
| Warning Orange | #FF9800 | Warning messages, pending status |
| Error Red | #F44336 | Error messages, failed status |
| Background Gray | #F5F5F5 | Page background |
| White | #FFFFFF | Card backgrounds |
| Text Primary | #212121 | Main text |
| Text Secondary | #757575 | Secondary text |

#### 4.4.3 Typography

- **Font Family:** 'Roboto', sans-serif (standard for Material Design)
- **Headings:** 
  - H1: 32px, Bold
  - H2: 24px, Medium
  - H3: 20px, Medium
- **Body Text:** 16px, Regular
- **Small Text:** 14px, Regular

#### 4.4.4 Component Library

**Reusable React Components:**

1. **Navigation**
   - `<Navbar />` - Top navigation bar
   - `<Sidebar />` - Side menu for desktop
   - `<MobileMenu />` - Hamburger menu for mobile

2. **Forms**
   - `<FormInput />` - Text input with validation
   - `<FormSelect />` - Dropdown select
   - `<FormTextarea />` - Multi-line text input
   - `<FormRadio />` - Radio button group
   - `<FormCheckbox />` - Checkbox
   - `<FileUpload />` - File upload with drag-and-drop

3. **Data Display**
   - `<Table />` - Responsive data table with sorting and pagination
   - `<Card />` - Content card container
   - `<Badge />` - Status badge
   - `<Chip />` - Tag/label chip

4. **Feedback**
   - `<Alert />` - Alert message (success/error/warning/info)
   - `<Toast />` - Temporary notification
   - `<Modal />` - Dialog/popup
   - `<LoadingSpinner />` - Loading indicator
   - `<ProgressBar />` - Progress indicator

5. **Navigation**
   - `<Tabs />` - Tab navigation
   - `<Breadcrumbs />` - Breadcrumb navigation
   - `<Pagination />` - Page navigation

#### 4.4.5 Page Wireframes (Text-Based)

**Login Page:**
```
┌──────────────────────────────────────────┐
│          [LUMS Logo]                     │
│                                          │
│      Registrar Office Login              │
│                                          │
│  ┌────────────────────────────────────┐  │
│  │ Email Address                      │  │
│  │ [________________________]         │  │
│  └────────────────────────────────────┘  │
│                                          │
│  ┌────────────────────────────────────┐  │
│  │ Password                           │  │
│  │ [________________________]         │  │
│  └────────────────────────────────────┘  │
│                                          │
│  [ ] Remember me      Forgot Password?  │
│                                          │
│  ┌────────────────────────────────────┐  │
│  │        [Sign In]                   │  │
│  └────────────────────────────────────┘  │
│                                          │
└──────────────────────────────────────────┘
```

**Dashboard Page:**
```
┌──────────────────────────────────────────────────────────────────┐
│ [☰] LUMS Registrar Office              [🔔 3] [John Doe ▾]      │
├──────────────────────────────────────────────────────────────────┤
│ Sidebar  │                                                       │
│ (Mobile) │  Welcome, John Doe                                    │
│          │                                                       │
│  Home    │  ┌──────────┐ ┌──────────┐ ┌──────────┐             │
│  New     │  │ Pending  │ │Completed │ │  Total   │             │
│  Request │  │    3     │ │    12    │ │ Spent    │             │
│  My      │  │ Requests │ │ Requests │ │ PKR 8500 │             │
│  Requests│  └──────────┘ └──────────┘ └──────────┘             │
│  Calendar│                                                       │
│  Profile │  ┌─────────────────────────────────────────────┐     │
│  ─────── │  │ 📢 Important Announcement                   │     │
│  Logout  │  │ Spring 2026 convocation: June 15, 2026      │     │
│          │  └─────────────────────────────────────────────┘     │
│          │                                                       │
│          │  Recent Requests                                      │
│          │  ┌─────┬─────────┬────────┬──────┬─────────┐         │
│          │  │ ID  │  Type   │ Status │ Date │ Amount  │         │
│          │  ├─────┼─────────┼────────┼──────┼─────────┤         │
│          │  │ 001 │Transcrp │ Ready  │02/01 │ PKR 800 │         │
│          │  │ 002 │ Degree  │Process │01/28 │PKR 1500 │         │
│          │  │ 003 │ Letter  │ Paid   │01/25 │ PKR 500 │         │
│          │  └─────┴─────────┴────────┴──────┴─────────┘         │
│          │  [1] 2 3 Next >                                       │
└──────────┴───────────────────────────────────────────────────────┘
```

**Request Form Page (Multi-Step):**
```
┌──────────────────────────────────────────────────────────────────┐
│ [Back] New Document Request                                      │
├──────────────────────────────────────────────────────────────────┤
│                                                                   │
│  Step 1 ───● Step 2 ───○ Step 3 ───○ Step 4                     │
│  Document   Details    Review     Payment                         │
│                                                                   │
│  ┌────────────────────────────────────────────────────┐          │
│  │ Select Document Type                                │          │
│  │                                                     │          │
│  │ ⦿ Official Transcript                              │          │
│  │ ○ Electronic Transcript                            │          │
│  │ ○ Degree Certificate                               │          │
│  │ ○ Enrollment Letter                                │          │
│  │ ○ Completion Letter                                │          │
│  └────────────────────────────────────────────────────┘          │
│                                                                   │
│  [< Back]                                       [Next >]          │
│                                                                   │
└──────────────────────────────────────────────────────────────────┘
```

### 4.5 Security Design

#### 4.5.1 Authentication & Session Management

**Implementation:**
1. **Password Hashing:** Flask-Bcrypt with 12 rounds
2. **JWT Tokens:** 
   - Access token: 30 minutes expiry
   - Refresh token: 7 days expiry
   - Stored in httpOnly cookies (not localStorage for security)
3. **Session Security:**
   - CSRF token required for all POST/PUT/DELETE requests
   - Session timeout after 30 minutes inactivity
4. **Account Lockout:**
   - Lock account after 5 failed login attempts within 15 minutes
   - Unlock via email or admin intervention

#### 4.5.2 Authorization & Access Control

**Flask Permission Decorators:**
```python
# Custom permissions using decorators
from flask_jwt_extended import jwt_required
from app.utils.decorators import role_required

@bp.route('/admin-only')
@jwt_required()
@role_required('admin')
def admin_only_route():
    return jsonify({"message": "Admin access granted"})

@bp.route('/staff-or-admin')
@jwt_required()
@role_required('staff', 'admin')
def staff_or_admin_route():
    return jsonify({"message": "Staff or admin access"})
```

#### 4.5.3 Data Protection

1. **Encryption in Transit:** HTTPS/TLS 1.3 for all communications
2. **Encryption at Rest:** 
   - Sensitive fields (CNIC, bank details) encrypted using cryptography library
   - Database-level encryption for backups
3. **Input Validation:**
   - Marshmallow schemas for all API inputs
   - File upload restrictions: PDF, JPG, PNG only, max 5MB
   - Sanitize all user inputs to prevent XSS
4. **SQL Injection Prevention:**
   - SQLAlchemy ORM exclusively (parameterized queries)
   - No raw SQL with string concatenation
5. **CSRF Protection:**
   - Flask's built-in CSRF protection enabled
   - CSRF token in cookies, validated on state-changing requests

#### 4.5.4 Flask Security Configuration

```python
# config.py
import os
from datetime import timedelta

class Config:
    SECRET_KEY = os.environ.get('SECRET_KEY') or 'dev-secret-key'
    SQLALCHEMY_DATABASE_URI = os.environ.get('DATABASE_URL') or \
        'postgresql://user:password@localhost/lums_ro'
    SQLALCHEMY_TRACK_MODIFICATIONS = False
    
    # JWT Configuration
    JWT_SECRET_KEY = os.environ.get('JWT_SECRET_KEY') or 'jwt-secret-key'
    JWT_ACCESS_TOKEN_EXPIRES = timedelta(minutes=30)
    JWT_REFRESH_TOKEN_EXPIRES = timedelta(days=7)
    JWT_TOKEN_LOCATION = ['headers']
    
    # Security Headers
    SESSION_COOKIE_SECURE = True  # HTTPS only
    SESSION_COOKIE_HTTPONLY = True
    SESSION_COOKIE_SAMESITE = 'Lax'
    
    # File Upload
    UPLOAD_FOLDER = os.environ.get('UPLOAD_FOLDER') or 'uploads'
    MAX_CONTENT_LENGTH = 16 * 1024 * 1024  # 16MB max file size
    
    # CORS
    CORS_ORIGINS = os.environ.get('CORS_ORIGINS', '').split(',')
```

#### 4.5.5 Audit Logging

All security-relevant events logged:
- Login attempts (success/failure)
- Password changes
- Permission changes
- Request status updates
- Document generation
- Administrative actions

Log format:
```json
{
  "timestamp": "2026-02-05T10:30:00Z",
  "user_id": 123,
  "email": "john.doe@lums.edu.pk",
  "action": "request_created",
  "resource": "Request",
  "resource_id": 456,
  "ip_address": "192.168.1.100",
  "user_agent": "Mozilla/5.0..."
}
```

---

## 5. Deployment Architecture

### 5.1 Production Environment

**Server Configuration:**
```
┌─────────────────────────────────────────┐
│          Load Balancer (Nginx)          │
│      (SSL Termination, Rate Limiting)   │
└─────────────┬───────────────────────────┘
              │
    ┌─────────┴──────────┐
    │                    │
┌───▼───────┐    ┌───────▼────┐
│ App       │    │ App         │
│ Server 1  │    │ Server 2    │
│ (Gunicorn)│    │ (Gunicorn)  │
└───┬───────┘    └───────┬────┘
    │                    │
    └─────────┬──────────┘
              │
    ┌─────────▼──────────────┐
    │  PostgreSQL Database    │
    │  (Primary + Replica)    │
    └─────────────────────────┘
    
    ┌─────────────────────────┐
    │  Redis (Cache/Sessions) │
    └─────────────────────────┘
    
    ┌─────────────────────────┐
    │  File Storage (S3/Local)│
    └─────────────────────────┘
```

### 5.2 Docker Deployment

**docker-compose.yml:**
```yaml
version: '3.8'

services:
  db:
    image: postgres:15
    environment:
      POSTGRES_DB: lums_ro
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

  backend:
    build: ./backend
    command: gunicorn -w 4 -b 0.0.0.0:5000 "app:create_app()"
    volumes:
      - ./backend:/app
      - static_volume:/app/static
      - media_volume:/app/media
    ports:
      - "5000:5000"
    depends_on:
      - db
      - redis
    environment:
      - DATABASE_URL=postgresql://postgres:${DB_PASSWORD}@db:5432/lums_ro
      - REDIS_URL=redis://redis:6379/0
      - FLASK_APP=app:create_app()
      - FLASK_ENV=production

  frontend:
    build: ./frontend
    command: npm start
    volumes:
      - ./frontend:/app
      - /app/node_modules
    ports:
      - "3000:3000"
    depends_on:
      - backend

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf
      - static_volume:/static
      - media_volume:/media
    depends_on:
      - backend
      - frontend

volumes:
  postgres_data:
  static_volume:
  media_volume:
```

### 5.3 CI/CD Pipeline (Concept)

Since this is vibe coding (LLM-only), manual CI/CD setup not allowed, but conceptually:

1. **Code Generation:** LLM generates all code
2. **Automated Testing:** LLM generates and runs tests
3. **Build:** Docker images built automatically
4. **Deploy:** Deploy to staging, then production after approval
5. **Monitoring:** Automated health checks and error reporting

---

## Appendices

### Appendix A: Complete Prompt Log

**Phase 1: Project Initiation**
1. "Can you help me complete this assignment [PDF uploaded]"
2. "Which LLM would be suitable for each phase"
3. "What about Replit"

**Phase 2: Requirements & Design (Technology Selection)**
4. "This is my first deliverable. Please create a document."
5. "Shouldn't this document contain figma wireframes too?"
6. "For backend I want to use python based library. Preferably flask and for frontend I want to use react along with MUI for styling."
7. "Keep in mind that later for development phase I will be using django with react." [CORRECTION NEEDED]
8. "Apologies. I made a mistake instead of using django + react. I will be using flask + react. Please update the document accordingly and carefully so no reference of django remains."
9. "Please deliver Requirements and design generated by prompting an LLM, preferred format IEEE SRS"

### Appendix B: Technology Justifications

**Why Flask?**
- Lightweight and flexible micro-framework
- Simple to learn and use
- Excellent for RESTful APIs
- Large ecosystem of extensions (Flask-SQLAlchemy, Flask-JWT-Extended, etc.)
- Fine-grained control over components
- Better for LLM code generation due to simplicity

**Why React?**
- Component-based architecture for reusability
- Virtual DOM for performance
- Large community and ecosystem
- Easy to create responsive, mobile-friendly UIs
- Excellent developer tools

**Why PostgreSQL?**
- ACID compliance for data integrity
- Excellent performance for complex queries
- JSON support for flexible data
- Strong SQLAlchemy integration

**Why SQLAlchemy?**
- Powerful and flexible ORM
- Database-agnostic (can switch databases if needed)
- Excellent Flask integration via Flask-SQLAlchemy
- Strong migration support via Alembic

### Appendix C: Flask Extensions Used

| Extension | Purpose |
|-----------|---------|
| Flask-SQLAlchemy | SQLAlchemy integration |
| Flask-Migrate | Database migrations (Alembic wrapper) |
| Flask-JWT-Extended | JWT authentication |
| Flask-Bcrypt | Password hashing |
| Flask-CORS | Cross-origin resource sharing |
| Flask-Marshmallow | Object serialization/validation |
| Flask-Limiter | Rate limiting |
| Flask-Mail | Email sending |

### Appendix D: Next Steps (Code Generation Phase)

**Prompt for Backend Generation:**
```
Generate a complete Flask 3.0+ backend application for the LUMS Registrar Office 
Management System based on the attached IEEE SRS document (sections 3-4).

Requirements:
- Flask 3.0+ with the following extensions:
  * Flask-SQLAlchemy for ORM
  * Flask-JWT-Extended for authentication
  * Flask-Bcrypt for password hashing
  * Flask-CORS for cross-origin requests
  * Flask-Marshmallow for serialization
  * Flask-Migrate for database migrations
  * Flask-Limiter for rate limiting

- Implement ALL database models from section 4.2:
  * User, Student, Request, Document, Payment
  * GradePetition, GCPApproval, MajorApplication
  * Notification, AcademicCalendar

- Create ALL API endpoints from section 4.3:
  * /api/auth/* (login, refresh, me)
  * /api/requests/* (create, list, details)
  * /api/gcp/* (submit, approve, track)
  * /api/major/* (apply, status)
  * /api/calendar/* (list events)
  * /api/payment/* (process, verify)
  * /api/admin/* (all admin functions)

- Implement role-based access control with decorator:
  * @role_required('student', 'alumni', 'staff', 'admin')

- Include comprehensive error handling and logging

- Follow the exact project structure specified in section 4.3.3

- Use PostgreSQL with proper indexes for performance

- Include input validation using Marshmallow schemas

- Implement proper security:
  * Password hashing with bcrypt (12 rounds)
  * JWT with 30-minute access tokens, 7-day refresh tokens
  * CORS configuration for specific origins
  * SQL injection prevention via SQLAlchemy ORM

- Generate requirements.txt with all dependencies

- Create .env.example file with all required environment variables

- Include database migration scripts using Flask-Migrate (Alembic)

Please generate complete, production-ready code following Flask best practices.
```

**Prompt for Frontend Generation:**
```
Generate a complete React 18 frontend application for the LUMS Registrar Office 
Management System based on the wireframe specifications in section 4.4.

Requirements:
- Use React 18 with Vite as the build tool

- Implement ALL pages with exact component specifications from section 4.4.5:
  * Login Page
  * Dashboard with sidebar navigation
  * Document Request Form - Multi-step with progress indicator
  * Admin Panel
  * My Requests page
  * Calendar page
  * Profile page

- Implement authentication:
  * AuthContext for global state
  * Token storage and refresh logic
  * Protected routes with PrivateRoute component
  * Automatic redirect on token expiration

- Create services layer for API calls:
  * axios instance with interceptors
  * authService, requestService, gcpService, etc.
  * Automatic token injection
  * Automatic token refresh on 401

- Implement responsive design:
  * Mobile-first approach
  * Breakpoints: 320px (mobile), 768px (tablet), 1024px+ (desktop)

- Follow the exact project structure from the document

- Use Formik + Yup for form validation

- Implement proper error handling and user feedback:
  * Toast notifications for success/error
  * Loading states with spinners
  * Error boundaries

- Include routing with React Router v6

- Generate package.json with all dependencies

- Create .env.example with API_URL configuration

- Implement the color theme from section 4.4.2:
  * Primary: #1976D2
  * Secondary: #DC004E
  * Success: #4CAF50
  * Error: #F44336

Please generate complete, production-ready code following React best practices.
```

---

## Document Verification

This document was generated entirely through LLM prompts (Claude Sonnet 4.5) as part of the CS 564 vibe coding assignment. All requirements and design specifications were derived from:
1. Analysis of the reference website (https://ro.lums.edu.pk)
2. IEEE 830-1998 SRS standard
3. Best practices for Flask + React applications
4. **Technology Stack: Flask + React (Django references completely removed)**

**Generated:** February 5, 2026  
**Version:** 1.0  
**Total Pages:** 45+  
**LLM Used:** Claude Sonnet 4.5  
**Backend:** Flask 3.0+  
**Frontend:** React 18+  
**Database:** PostgreSQL 15+

---

**END OF DOCUMENT**
